(this["webpackJsonphan-assessment-app"]=this["webpackJsonphan-assessment-app"]||[]).push([[0],{35:function(e,t,a){e.exports={item:"TodoItem_item__3MbaD",checkbox:"TodoItem_checkbox__2Jrs8",textInput:"TodoItem_textInput__t35cu"}},71:function(e,t,a){},97:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(53),o=a.n(c),r=a(30),i=a(5),d=(a(71),a(19)),l=a(36),j=a(7),u=a(20),b=a.n(u),h=a(115),m=a(112),O=a(22),x=a(29),p=a(2),f=function(e){var t=Object(n.useState)({title:""}),a=Object(j.a)(t,2),s=a[0],c=a[1];return Object(p.jsxs)("form",{className:"form-container",onSubmit:function(t){t.preventDefault(),s.title.trim()?(e.addTodoItemProps(s.title),c({title:""})):alert("Please specify to-do item")},children:[Object(p.jsx)("input",{className:"input-text",placeholder:"Add a task...",value:s.title,name:"title",onChange:function(e){c(Object(d.a)(Object(d.a)({},s),{},Object(O.a)({},e.target.name,e.target.value)))}}),Object(p.jsx)("button",{className:"input-submit",children:Object(p.jsx)(x.b,{style:{color:"darkcyan",fontSize:20,marginTop:2}})})]})},g=function(e){return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(h.a,{style:{display:"flex",flexDirection:"column",textAlign:"center",borderRadius:15,width:300,marginTop:100},children:[Object(p.jsx)(m.a,{children:Object(p.jsx)("span",{children:"You have no task."})}),Object(p.jsx)(m.a,{children:Object(p.jsx)(f,{addTodoItemProps:e.addTodoItemProps})})]})})},v=a(114),y=function(){var e=sessionStorage.getItem("user"),t=Object(i.f)();return Object(p.jsxs)("nav",{className:"navBar",children:[Object(p.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(p.jsx)(v.a,{atl:e,style:{margin:10}}),Object(p.jsx)("span",{style:{color:"#6D8187"},children:e})]}),Object(p.jsx)("button",{style:{lineHeight:"1.5rem",width:"5rem",margin:10,borderRadius:10,border:"none",background:"transparent",color:"#6D8187",cursor:"pointer"},onClick:function(){sessionStorage.clear(),t.push("/login")},children:"Logout"})]})},k=a(113),S=a(35),N=a.n(S),I=function(e){var t=e.todo,a=t._id,s=t.name,c=t.completed,o=Object(n.useState)(!1),r=Object(j.a)(o,2),i=r[0],d=r[1],l=Object(n.useState)(s),u=Object(j.a)(l,2),b=u[0],h=u[1],m=Object(n.useState)(c),O=Object(j.a)(m,2),f=O[0],g=O[1],v={},y={};i?v.display="none":y.display="none",Object(n.useEffect)((function(){return function(){console.log("Cleaning up...")}}),[]);var S=function(){var t={name:b,completed:f};e.editTodo(t,a)};return Object(p.jsx)("li",{className:N.a.item,children:e.loading?Object(p.jsx)(k.a,{}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{style:v,children:[Object(p.jsx)("input",{className:N.a.checkbox,type:"checkbox",checked:f,onChange:function(){g(!f);var t={name:b,completed:!f};e.editTodo(t,a)}}),Object(p.jsx)("button",{onClick:function(){return e.deleteTodoProps(a)},children:Object(p.jsx)(x.c,{style:{fontSize:16}})}),Object(p.jsx)("button",{onClick:function(){d(!0)},children:Object(p.jsx)(x.a,{style:{fontSize:16}})}),Object(p.jsx)("span",{style:f?{fontStyle:"italic",color:"#595959",opacity:.4,textDecoration:"line-through"}:null,children:b})]}),Object(p.jsx)("input",{type:"text",className:N.a.textInput,style:y,value:b,onSubmit:S,onChange:function(e){h(e.target.value)},onKeyDown:function(e){!function(e){"Enter"===e.key&&(d(!1),S())}(e)}})]})})},C=function(e){var t=e.todos,a=e.handleChangeProps,s=e.deleteTodoProps,c=e.editTodo,o=e.loading,r=Object(n.useState)(""),i=Object(j.a)(r,2),d=i[0],l=i[1];return Object(p.jsx)(h.a,{children:Object(p.jsxs)("div",{style:{padding:20},children:[Object(p.jsx)("input",{className:"search-input",placeholder:"Search tasks...",value:d,onChange:function(e){l(e.target.value),a(e.target.value)},name:"search"}),Object(p.jsx)("ul",{className:"reversed-order",children:t.map((function(e){return Object(p.jsx)(I,{loading:o,todo:e,handleChangeProps:a,deleteTodoProps:s,editTodo:c},e._id)}))})]})})},D=function(e){var t,a;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{style:{fontSize:"3em",fontWeight:"bold",color:"#5285EC"},children:null===(t=e.dashboardData)||void 0===t?void 0:t.tasksCompleted}),Object(p.jsxs)("span",{style:{fontSize:"1em",fontWeight:"bold"},children:["/",null===(a=e.dashboardData)||void 0===a?void 0:a.totalTasks]})]})},T=function(e){var t,a={fontStyle:"italic",color:"#595959",opacity:.4,textDecoration:"line-through"};return Object(p.jsx)("div",{className:"latest-tasks",children:Object(p.jsx)("ul",{className:"reversed-order",children:null===(t=e.dashboardData)||void 0===t?void 0:t.latestTasks.sort((function(e,t){return new Date(e.createdAt)-new Date(t.createdAt)})).map((function(e){return Object(p.jsx)("li",{children:Object(p.jsx)("span",{style:e.completed?a:null,children:e.name})},e._id)}))})})},P=a(61),_=function(e){var t=e.dashboardData?Number(e.dashboardData.tasksCompleted):0,a=[{title:"Completed",value:t,color:"#5285EC"},{title:"Incomplete",value:(e.dashboardData?Number(e.dashboardData.totalTasks):0)-t,color:"#E8ECEC"}];return Object(p.jsx)(P.PieChart,{reveal:!0,data:a,label:function(e){var t=e.dataEntry;return"Completed"===t.title?t.title:null},labelStyle:function(){return{fontSize:"7px"}},radius:38,labelPosition:85})},E=function(e){var t=Object(n.useState)(e.todos),a=Object(j.a)(t,2),s=a[0],c=a[1];Object(n.useEffect)((function(){c(e.todos)}),[e.todos]);var o={borderRadius:15};return Object(p.jsx)("header",{style:{padding:"20px 0",lineHeight:"1.5em"},children:Object(p.jsxs)("div",{className:"header-div",children:[Object(p.jsx)(h.a,{style:o,className:"header-card",children:e.loading?Object(p.jsx)(k.a,{}):Object(p.jsxs)(m.a,{children:[Object(p.jsx)("h5",{children:"Tasks Completed"}),Object(p.jsx)("div",{className:"inner-div",children:Object(p.jsx)(D,{dashboardData:e.dashboardData,todos:s})})]})}),Object(p.jsx)(h.a,{style:o,className:"header-card",children:e.loading?Object(p.jsx)(k.a,{}):Object(p.jsxs)(m.a,{children:[Object(p.jsx)("h5",{children:"Latest Created Tasks"}),Object(p.jsx)("div",{className:"inner-div",children:Object(p.jsx)(T,{dashboardData:e.dashboardData,todos:s})})]})}),Object(p.jsx)(h.a,{style:o,className:"header-card",children:e.loading?Object(p.jsx)(k.a,{}):Object(p.jsx)(m.a,{children:Object(p.jsx)(_,{dashboardData:e.dashboardData,todos:s})})})]})})},z=function(){var e=Object(n.useState)([]),t=Object(j.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(!1),o=Object(j.a)(c,2),r=o[0],i=o[1],u=Object(n.useState)(),h=Object(j.a)(u,2),m=h[0],O=h[1],x=Object(n.useState)(),v=Object(j.a)(x,2),k=v[0],S=v[1],N=Object(n.useState)(sessionStorage.getItem("token")),I=Object(j.a)(N,2),D=I[0],T=I[1];Object(n.useEffect)((function(){b()({method:"get",url:"https://dev-dl.tdcx.com:3092/tasks",headers:{Authorization:"Bearer ".concat(D)}}).then((function(e){s(Object(l.a)(e.data.tasks)),_()}))}),[D]),Object(n.useEffect)((function(){T(sessionStorage.getItem("token"))}),[sessionStorage.getItem("token")]);var P=function(e){i(!0),_(),b()({method:"post",url:"https://dev-dl.tdcx.com:3092/tasks",headers:{Authorization:"Bearer ".concat(D)},data:{name:e}}).then((function(e){var t=e.data;e.status;i(!1),s([].concat(Object(l.a)(a),[t.task]))}))};function _(){b()({method:"get",url:"https://dev-dl.tdcx.com:3092/dashboard",headers:{Authorization:"Bearer ".concat(D)}}).then((function(e){O(e.data)}))}Object(n.useEffect)((function(){console.log("current todos",a)}),[a]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(y,{}),Object(p.jsxs)("div",{className:"container",children:[Object(p.jsxs)("div",{className:"inner-container",style:{display:a.length?null:"none"},children:[Object(p.jsx)(E,{dashboardData:m,loading:r,todos:a}),Object(p.jsx)(f,{addTodoItemProps:P}),Object(p.jsx)(C,{loading:r,todos:k||a,handleChangeProps:function(e){var t=a.filter((function(t){return t.name.includes(e)}));S(t)},deleteTodoProps:function(e){_(),b()({method:"delete",url:"https://dev-dl.tdcx.com:3092/tasks/".concat(e),headers:{Authorization:"Bearer ".concat(D)}}).then((function(){var t=a.filter((function(t){return t._id!==e}));s(t)})),_()},editTodo:function(e,t){_(),b()({method:"put",url:"https://dev-dl.tdcx.com:3092/tasks/".concat(t),headers:{Authorization:"Bearer ".concat(D)},data:Object(d.a)({},e)}).then((function(e){var n=e.data,c=a.findIndex((function(e){return e._id===t})),o=a;o.splice(c,1,n.task),s(Object(l.a)(o))})),_()}})]}),Object(p.jsx)("div",{className:"inner-container",style:{display:a.length?"none":"flex",justifyContent:"center"},children:Object(p.jsx)(g,{addTodoItemProps:P})})]})]})},w=a(42),A=a.n(w),B=a(62),L=b.a.create({baseURL:"https://dev-dl.tdcx.com:3092",headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token"))}}),F=function(){var e=Object(n.useState)({id:"",name:""}),t=Object(j.a)(e,2),a=t[0],s=t[1],c=Object(i.f)(),o=function(e){s(Object(d.a)(Object(d.a)({},a),{},Object(O.a)({},e.target.name,e.target.value)))},r=function(){var e=Object(B.a)(A.a.mark((function e(t){var n,s,o,r,i,d;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),console.log(t.target.name.value,t.target.id.value),n=t.target.id.value,s=t.target.name.value,!a.id.trim()||!a.name.trim()){e.next=20;break}return e.prev=5,e.next=8,L.post("/login",{name:s,apiKey:n});case 8:o=e.sent,r=o.data.token,i=r.name,d=r.token,sessionStorage.setItem("token",d),sessionStorage.setItem("user",i),d&&c.push("/"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),console.error(e.t0);case 18:e.next=21;break;case 20:alert("Please fill the id and name fields");case 21:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:Object(p.jsx)(h.a,{style:{width:300,height:300},children:Object(p.jsx)(m.a,{children:Object(p.jsxs)("div",{className:"login-container",children:[Object(p.jsx)("div",{style:{textAlign:"left",width:"85%",marginBottom:20},children:"Login"}),Object(p.jsxs)("form",{className:"login-form-container",onSubmit:r,children:[Object(p.jsx)("input",{className:"login-input-text",name:"id",placeholder:"Id",value:a.id,onChange:o}),Object(p.jsx)("input",{className:"login-input-text",name:"name",placeholder:"Name",value:a.name,onChange:o}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{className:"login-input-submit",children:"Login"})})]})]})})})})};o.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsxs)(r.a,{basename:"/todo-app",children:[Object(p.jsx)(i.b,{path:"/login",component:F,children:sessionStorage.getItem("token")?Object(p.jsx)(i.a,{to:"/"}):Object(p.jsx)(F,{})}),Object(p.jsxs)(i.b,{path:"/",children:[console.log("sessionStorage token",sessionStorage.getItem("token")),sessionStorage.getItem("token")?Object(p.jsx)(z,{}):Object(p.jsx)(i.a,{to:"/login"})]})]})}),document.getElementById("root"))}},[[97,1,2]]]);
//# sourceMappingURL=main.33e77f1a.chunk.js.map