(this["webpackJsonphan-assessment-app"]=this["webpackJsonphan-assessment-app"]||[]).push([[0],{35:function(e,t,a){e.exports={item:"TodoItem_item__3MbaD",checkbox:"TodoItem_checkbox__2Jrs8",textInput:"TodoItem_textInput__t35cu"}},71:function(e,t,a){},97:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(53),o=a.n(s),r=a(22),i=a(5),d=(a(71),a(19)),l=a(36),j=a(7),u=a(20),b=a.n(u),h=a(115),m=a(112),O=a(23),x=a(30),p=a(2),f=function(e){var t=Object(n.useState)({title:""}),a=Object(j.a)(t,2),c=a[0],s=a[1];return Object(p.jsxs)("form",{className:"form-container",onSubmit:function(t){t.preventDefault(),c.title.trim()?(e.addTodoItemProps(c.title),s({title:""})):alert("Please specify to-do item")},children:[Object(p.jsx)("input",{className:"input-text",placeholder:"Add a task...",value:c.title,name:"title",onChange:function(e){s(Object(d.a)(Object(d.a)({},c),{},Object(O.a)({},e.target.name,e.target.value)))}}),Object(p.jsx)("button",{className:"input-submit",children:Object(p.jsx)(x.b,{style:{color:"darkcyan",fontSize:20,marginTop:2}})})]})},g=function(e){return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)(h.a,{style:{display:"flex",flexDirection:"column",textAlign:"center",borderRadius:15,width:300,marginTop:100},children:[Object(p.jsx)(m.a,{children:Object(p.jsx)("span",{children:"You have no task."})}),Object(p.jsx)(m.a,{children:Object(p.jsx)(f,{addTodoItemProps:e.addTodoItemProps})})]})})},v=a(114),y=function(){var e=sessionStorage.getItem("user"),t=Object(i.e)();return Object(p.jsxs)("nav",{className:"navBar",children:[Object(p.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(p.jsx)(v.a,{atl:e,style:{margin:10}}),Object(p.jsx)("span",{style:{color:"#6D8187"},children:e})]}),Object(p.jsx)("button",{style:{lineHeight:"1.5rem",width:"5rem",margin:10,borderRadius:10,border:"none",background:"transparent",color:"#6D8187",cursor:"pointer"},onClick:function(){sessionStorage.clear(),t.push("/login")},children:"Logout"})]})},k=a(113),S=a(35),N=a.n(S),C=function(e){var t=e.todo,a=t._id,c=t.name,s=t.completed,o=Object(n.useState)(!1),r=Object(j.a)(o,2),i=r[0],d=r[1],l=Object(n.useState)(c),u=Object(j.a)(l,2),b=u[0],h=u[1],m=Object(n.useState)(s),O=Object(j.a)(m,2),f=O[0],g=O[1],v={},y={};i?v.display="none":y.display="none",Object(n.useEffect)((function(){return function(){console.log("Cleaning up...")}}),[]);var S=function(){var t={name:b,completed:f};e.editTodo(t,a)};return Object(p.jsx)("li",{className:N.a.item,children:e.loading?Object(p.jsx)(k.a,{}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{style:v,children:[Object(p.jsx)("input",{className:N.a.checkbox,type:"checkbox",checked:f,onChange:function(){g(!f);var t={name:b,completed:!f};e.editTodo(t,a)}}),Object(p.jsx)("button",{onClick:function(){return e.deleteTodoProps(a)},children:Object(p.jsx)(x.c,{style:{fontSize:16}})}),Object(p.jsx)("button",{onClick:function(){d(!0)},children:Object(p.jsx)(x.a,{style:{fontSize:16}})}),Object(p.jsx)("span",{style:f?{fontStyle:"italic",color:"#595959",opacity:.4,textDecoration:"line-through"}:null,children:b})]}),Object(p.jsx)("input",{type:"text",className:N.a.textInput,style:y,value:b,onSubmit:S,onChange:function(e){h(e.target.value)},onKeyDown:function(e){!function(e){"Enter"===e.key&&(d(!1),S())}(e)}})]})})},D=function(e){var t=e.todos,a=e.handleChangeProps,c=e.deleteTodoProps,s=e.editTodo,o=e.loading,r=Object(n.useState)(""),i=Object(j.a)(r,2),d=i[0],l=i[1];return Object(p.jsx)(h.a,{children:Object(p.jsxs)("div",{style:{padding:20},children:[Object(p.jsx)("input",{className:"search-input",placeholder:"Search tasks...",value:d,onChange:function(e){l(e.target.value),a(e.target.value)},name:"search"}),Object(p.jsx)("ul",{className:"reversed-order",children:t.map((function(e){return Object(p.jsx)(C,{loading:o,todo:e,handleChangeProps:a,deleteTodoProps:c,editTodo:s},e._id)}))})]})})},I=function(e){var t,a;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("span",{style:{fontSize:"3em",fontWeight:"bold",color:"#5285EC"},children:null===(t=e.dashboardData)||void 0===t?void 0:t.tasksCompleted}),Object(p.jsxs)("span",{style:{fontSize:"1em",fontWeight:"bold"},children:["/",null===(a=e.dashboardData)||void 0===a?void 0:a.totalTasks]})]})},T=function(e){var t,a={fontStyle:"italic",color:"#595959",opacity:.4,textDecoration:"line-through"};return Object(p.jsx)("div",{className:"latest-tasks",children:Object(p.jsx)("ul",{className:"reversed-order",children:null===(t=e.dashboardData)||void 0===t?void 0:t.latestTasks.sort((function(e,t){return new Date(e.createdAt)-new Date(t.createdAt)})).map((function(e){return Object(p.jsx)("li",{children:Object(p.jsx)("span",{style:e.completed?a:null,children:e.name})},e._id)}))})})},P=a(61),E=function(e){var t=e.dashboardData?Number(e.dashboardData.tasksCompleted):0,a=[{title:"Completed",value:t,color:"#5285EC"},{title:"Incomplete",value:(e.dashboardData?Number(e.dashboardData.totalTasks):0)-t,color:"#E8ECEC"}];return Object(p.jsx)(P.PieChart,{reveal:!0,data:a,label:function(e){var t=e.dataEntry;return"Completed"===t.title?t.title:null},labelStyle:function(){return{fontSize:"7px"}},radius:38,labelPosition:85})},_=function(e){var t=Object(n.useState)(e.todos),a=Object(j.a)(t,2),c=a[0],s=a[1];Object(n.useEffect)((function(){s(e.todos)}),[e.todos]);var o={borderRadius:15};return Object(p.jsx)("header",{style:{padding:"20px 0",lineHeight:"1.5em"},children:Object(p.jsxs)("div",{className:"header-div",children:[Object(p.jsx)(h.a,{style:o,className:"header-card",children:e.loading?Object(p.jsx)(k.a,{}):Object(p.jsxs)(m.a,{children:[Object(p.jsx)("h5",{children:"Tasks Completed"}),Object(p.jsx)("div",{className:"inner-div",children:Object(p.jsx)(I,{dashboardData:e.dashboardData,todos:c})})]})}),Object(p.jsx)(h.a,{style:o,className:"header-card",children:e.loading?Object(p.jsx)(k.a,{}):Object(p.jsxs)(m.a,{children:[Object(p.jsx)("h5",{children:"Latest Created Tasks"}),Object(p.jsx)("div",{className:"inner-div",children:Object(p.jsx)(T,{dashboardData:e.dashboardData,todos:c})})]})}),Object(p.jsx)(h.a,{style:o,className:"header-card",children:e.loading?Object(p.jsx)(k.a,{}):Object(p.jsx)(m.a,{children:Object(p.jsx)(E,{dashboardData:e.dashboardData,todos:c})})})]})})},z=function(){var e=Object(n.useState)([]),t=Object(j.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(!1),o=Object(j.a)(s,2),r=o[0],u=o[1],h=Object(n.useState)(),m=Object(j.a)(h,2),O=m[0],x=m[1],v=Object(n.useState)(),k=Object(j.a)(v,2),S=k[0],N=k[1],C=Object(n.useState)(sessionStorage.getItem("token")),I=Object(j.a)(C,2),T=I[0],P=I[1],E=Object(i.e)();Object(n.useEffect)((function(){T||E.push("/login")}),[]),Object(n.useEffect)((function(){b()({method:"get",url:"https://dev-dl.tdcx.com:3092/tasks",headers:{Authorization:"Bearer ".concat(T)}}).then((function(e){c(Object(l.a)(e.data.tasks)),w()}))}),[T]),Object(n.useEffect)((function(){P(sessionStorage.getItem("token"))}),[sessionStorage.getItem("token")]);var z=function(e){u(!0),w(),b()({method:"post",url:"https://dev-dl.tdcx.com:3092/tasks",headers:{Authorization:"Bearer ".concat(T)},data:{name:e}}).then((function(e){var t=e.data;e.status;u(!1),c([].concat(Object(l.a)(a),[t.task]))}))};function w(){b()({method:"get",url:"https://dev-dl.tdcx.com:3092/dashboard",headers:{Authorization:"Bearer ".concat(T)}}).then((function(e){x(e.data)}))}Object(n.useEffect)((function(){console.log("current todos",a)}),[a]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(y,{}),Object(p.jsxs)("div",{className:"container",children:[Object(p.jsxs)("div",{className:"inner-container",style:{display:a.length?null:"none"},children:[Object(p.jsx)(_,{dashboardData:O,loading:r,todos:a}),Object(p.jsx)(f,{addTodoItemProps:z}),Object(p.jsx)(D,{loading:r,todos:S||a,handleChangeProps:function(e){var t=a.filter((function(t){return t.name.includes(e)}));N(t)},deleteTodoProps:function(e){w(),b()({method:"delete",url:"https://dev-dl.tdcx.com:3092/tasks/".concat(e),headers:{Authorization:"Bearer ".concat(T)}}).then((function(){var t=a.filter((function(t){return t._id!==e}));c(t)})),w()},editTodo:function(e,t){w(),b()({method:"put",url:"https://dev-dl.tdcx.com:3092/tasks/".concat(t),headers:{Authorization:"Bearer ".concat(T)},data:Object(d.a)({},e)}).then((function(e){var n=e.data,s=a.findIndex((function(e){return e._id===t})),o=a;o.splice(s,1,n.task),c(Object(l.a)(o))})),w()}})]}),Object(p.jsx)("div",{className:"inner-container",style:{display:a.length?"none":"flex",justifyContent:"center"},children:Object(p.jsx)(g,{addTodoItemProps:z})})]})]})},w=a(42),A=a.n(w),B=a(62),L=b.a.create({baseURL:"https://dev-dl.tdcx.com:3092",headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token"))}}),F=function(){var e=Object(n.useState)({id:"",name:""}),t=Object(j.a)(e,2),a=t[0],c=t[1],s=Object(i.e)(),o=function(e){c(Object(d.a)(Object(d.a)({},a),{},Object(O.a)({},e.target.name,e.target.value)))},r=function(){var e=Object(B.a)(A.a.mark((function e(t){var n,c,o,r,i,d;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),console.log(t.target.name.value,t.target.id.value),n=t.target.id.value,c=t.target.name.value,!a.id.trim()||!a.name.trim()){e.next=21;break}return e.prev=5,e.next=8,L.post("/login",{name:c,apiKey:n});case 8:o=e.sent,r=o.data.token,i=r.name,d=r.token,sessionStorage.setItem("token",d),sessionStorage.setItem("user",i),d&&s.push("/"),console.log("pushed"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),console.error(e.t0);case 19:e.next=22;break;case 21:alert("Please fill the id and name fields");case 22:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return console.log("login mounted"),function(){return console.log("login unmount")}}),[]),Object(p.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:Object(p.jsx)(h.a,{style:{width:300,height:300},children:Object(p.jsx)(m.a,{children:Object(p.jsxs)("div",{className:"login-container",children:[Object(p.jsx)("div",{style:{textAlign:"left",width:"85%",marginBottom:20},children:"Login"}),Object(p.jsxs)("form",{className:"login-form-container",onSubmit:r,children:[Object(p.jsx)("input",{className:"login-input-text",name:"id",placeholder:"Id",value:a.id,onChange:o}),Object(p.jsx)("input",{className:"login-input-text",name:"name",placeholder:"Name",value:a.name,onChange:o}),Object(p.jsx)("div",{children:Object(p.jsx)("button",{className:"login-input-submit",children:"Login"})})]})]})})})})};o.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsxs)(r.a,{basename:"/todo-app",children:[Object(p.jsx)(i.a,{exact:!0,path:"/",component:z}),Object(p.jsx)(i.a,{exact:!0,path:"/login",component:F})]})}),document.getElementById("root"))}},[[97,1,2]]]);
//# sourceMappingURL=main.391bce8f.chunk.js.map